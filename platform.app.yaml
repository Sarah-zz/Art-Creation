name: app-web
type: "docker"
disk: 512
build:
  flavor: "full"  # Utilisation du Dockerfile complet
  dockerfile: Dockerfile

# Définir les bases comme relationships
relationships:
  mysql: "mysql:mysql"
  mongodb: "mongodb:mongodb"

mounts:
  "/var/www/html": "shared:files"

# Déploiement du conteneur PHP-FPM
web:
  commands:
    start: ["php-fpm", "-F"]
  locations:
    "/":
      root: "/var/www/html/public"
      index: ["index.php"]
      passthru: [".php$"]
